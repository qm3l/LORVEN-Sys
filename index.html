<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script src="https://cdn.sheetjs.com/xlsx-0.20.2/package/dist/xlsx.full.min.js"></script>
    <title id="dynamicTitle">LORVEN SYS</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Icons (Font Awesome) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    
    <!-- Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Barcode Scanner -->
    <script src="https://unpkg.com/@zxing/library@latest/umd/index.min.js"></script>
    
  <link rel="stylesheet" href="css/style.css">

<link rel="manifest" href="manifest.json">
<!-- ุฃููููุฉ ุขูููู (ูููุชุตูุญุงุช ุงููุฏููุฉ) -->
<link rel="apple-touch-icon" href="/icons/icon-180.png">
<link rel="apple-touch-icon" sizes="152x152" href="/icons/icon-152.png">
<link rel="apple-touch-icon" sizes="120x120" href="/icons/icon-120.png">

</head>
<body>
    <div class="app-container">
        <!-- ุงูููุฏุฑ ุงูุฏููุงูููู -->
        <div id="dynamicHeader" class="page-header"></div>

        <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
        <div id="mainContent" class="main-content"></div>

        <!-- ุงููุงุฆูุฉ ุงูุณูููุฉ -->
        <div class="bottom-nav" id="bottomNav">
            <button class="nav-btn" onclick="switchPage('dashboard')"><i class="fas fa-home"></i><span data-i18n="home">ุงูุฑุฆูุณูุฉ</span></button>
            <button class="nav-btn" onclick="switchPage('products')"><i class="fas fa-box"></i><span data-i18n="products">ุงูููุชุฌุงุช</span></button>
            <button class="nav-btn" onclick="switchPage('invoices')"><i class="fas fa-receipt"></i><span data-i18n="invoices">ุงูููุงุชูุฑ</span></button>
            <button class="nav-btn" onclick="switchPage('reports')"><i class="fas fa-chart-pie"></i><span data-i18n="reports">ุงูุชูุงุฑูุฑ</span></button>
            <button class="nav-btn" onclick="switchPage('settings')"><i class="fas fa-cog"></i><span data-i18n="settings">ุงูุฅุนุฏุงุฏุงุช</span></button>
        </div>
    </div>

    <div class="toast" id="toast">ููุฑฺคูู ๐ธ</div>

    <!-- ========== ุงูููุฏุงูุงุช ========== -->

    <!-- ูุงุชุณุงุจ -->
    <div class="modal" id="whatsappModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fab fa-whatsapp"></i> <span data-i18n="sendInvoice">ุฅุฑุณุงู ุงููุงุชูุฑุฉ</span></div>
                <div class="modal-close" onclick="closeModal('whatsappModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div id="whatsappPreview" style="background: var(--gray-50); padding: 14px; border-radius: 18px; margin-bottom: 16px; direction: ltr; text-align: left; font-family: monospace; white-space: pre-wrap; font-size: 11px;"></div>
                <div class="form-group">
                    <label class="form-label" data-i18n="customerPhone">ุฑูู ุงูุนููู</label>
                    <input type="tel" inputmode="numeric" class="form-control" id="whatsappPhoneNumber" placeholder="771234567">
                </div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-outline" style="flex:1;" onclick="closeModal('whatsappModal')"><span data-i18n="cancel">ุฅูุบุงุก</span></button>
                    <button class="btn btn-wa" style="flex:1;" onclick="sendWhatsApp()"><span data-i18n="send">ุฅุฑุณุงู</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- ุฅุถุงูุฉ ููุชุฌ -->
    <div class="modal" id="addProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-plus"></i> <span data-i18n="newProduct">ููุชุฌ ุฌุฏูุฏ</span></div>
                <div class="modal-close" onclick="closeModal('addProductModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" data-i18n="productName">ุงุณู ุงูููุชุฌ</label>
                    <input type="text" class="form-control" id="newProductName" placeholder="ูุซุงู: ุณูุฑูู ููุชุงููู ุณู" data-i18n-placeholder="productNamePlaceholder">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="barcode">ุงูุจุงุฑููุฏ (ุงุชุฑูู ูุงุฑุบุงู ููุชูููุฏ ุงูุชููุงุฆู)</label>
                    <input type="text" class="form-control" id="newProductBarcode" placeholder="ุณูุชู ุฅูุดุงุคู ุชููุงุฆูุงู" data-i18n-placeholder="barcodePlaceholder">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div class="form-group">
                        <label class="form-label" data-i18n="cost">ุงูุชูููุฉ</label>
                        <input type="number" inputmode="numeric" class="form-control" id="newProductCost" placeholder="0.00" data-i18n-placeholder="costPlaceholder">
                    </div>
                    <div class="form-group">
                        <label class="form-label" data-i18n="price">ุงูุณุนุฑ</label>
                        <input type="number" inputmode="numeric" class="form-control" id="newProductPrice" placeholder="0.00" data-i18n-placeholder="pricePlaceholder">
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="stock">ุงููุฎุฒูู</label>
                    <input type="number" inputmode="numeric" class="form-control" id="newProductStock" placeholder="0" data-i18n-placeholder="stockPlaceholder">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="category">ุงููุฆุฉ</label>
                    <select class="form-control" id="newProductCategory">
                        <option>ุนูุงูุฉ ุจุงูุจุดุฑุฉ</option>
                        <option>ูููุงุฌ</option>
                        <option>ุนูุงูุฉ ุจุงูุดุนุฑ</option>
                        <option>ุนุทูุฑ</option>
                        <option>ููุชุฌุงุช ุทุจูุนูุฉ</option>
                    </select>
                </div>
                <button class="btn btn-primary" style="width:100%;" onclick="addNewProduct()"><span data-i18n="saveProduct">ุญูุธ ุงูููุชุฌ</span></button>
            </div>
        </div>
    </div>

    <!-- ุชุนุฏูู ููุชุฌ -->
    <div class="modal" id="editProductModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-edit"></i> <span data-i18n="editProduct">ุชุนุฏูู ุงูููุชุฌ</span></div>
                <div class="modal-close" onclick="closeModal('editProductModal')">&times;</div>
            </div>
            <div class="modal-body">
                <input type="hidden" id="editProductId">
                <div class="form-group">
                    <label class="form-label" data-i18n="productName">ุงุณู ุงูููุชุฌ</label>
                    <input type="text" class="form-control" id="editProductName">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="barcode">ุงูุจุงุฑููุฏ</label>
                    <input type="text" class="form-control" id="editProductBarcode">
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">
                    <div class="form-group"><label data-i18n="cost">ุงูุชูููุฉ</label><input type="number" inputmode="numeric" class="form-control" id="editProductCost"></div>
                    <div class="form-group"><label data-i18n="price">ุงูุณุนุฑ</label><input type="number" inputmode="numeric" class="form-control" id="editProductPrice"></div>
                </div>
                <div class="form-group"><label data-i18n="stock">ุงููุฎุฒูู</label><input type="number" inputmode="numeric" class="form-control" id="editProductStock"></div>
                <div class="form-group"><label data-i18n="category">ุงููุฆุฉ</label><select class="form-control" id="editProductCategory"></select></div>
                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-outline" style="flex:1;" onclick="closeModal('editProductModal')"><span data-i18n="cancel">ุฅูุบุงุก</span></button>
                    <button class="btn btn-primary" style="flex:1;" onclick="updateProduct()"><span data-i18n="update">ุชุญุฏูุซ</span></button>
                </div>
                <button class="btn btn-outline" style="width:100%; margin-top: 10px; color: var(--danger); border-color: var(--danger);" onclick="deleteProduct()"><span data-i18n="deleteProduct">ุญุฐู ุงูููุชุฌ</span></button>
            </div>
        </div>
    </div>

    <!-- ุชูุงุตูู ุงููุงุชูุฑุฉ -->
    <div class="modal" id="invoiceDetailsModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-file-invoice"></i> <span data-i18n="invoiceDetails">ุชูุงุตูู ุงููุงุชูุฑุฉ</span></div>
                <div class="modal-close" onclick="closeModal('invoiceDetailsModal')">&times;</div>
            </div>
            <div class="modal-body" id="invoiceDetailsContent">
                <!-- ุชูููุฃ ุฏููุงููููุงู -->
            </div>
        </div>
    </div>

    <!-- ุงูุจุญุซ ุงููุชูุฏู (ุจุฑูู ุงููุงุชูุฑุฉ + ุงุณู ุงูุนููู) -->
    <div class="modal" id="searchInvoiceModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-search"></i> <span data-i18n="searchInvoice">ุจุญุซ ูุชูุฏู</span></div>
                <div class="modal-close" onclick="closeModal('searchInvoiceModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" data-i18n="invoiceNumber">ุฑูู ุงููุงุชูุฑุฉ</label>
                    <input type="text" class="form-control" id="invoiceSearchNumber" placeholder="ูุซุงู: LVN-20260213-042">
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="customerName">ุงุณู ุงูุนููู</label>
                    <input type="text" class="form-control" id="invoiceSearchCustomer" placeholder="ุฃุฏุฎู ุงูุงุณู">
                </div>
                <button class="btn btn-primary" style="width:100%; margin-bottom: 10px;" onclick="findInvoiceAdvanced()"><span data-i18n="search">ุจุญุซ</span></button>
                <div id="invoiceSearchResult" style="max-height: 180px; overflow-y: auto;"></div>
            </div>
        </div>
    </div>

    <!-- ููุงุชูุฑ ุดูุฑูุฉ -->
    <div class="modal" id="monthlyInvoiceModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-calendar-alt"></i> <span data-i18n="monthlyInvoice">ููุงุชูุฑ ุดูุฑูุฉ</span></div>
                <div class="modal-close" onclick="closeModal('monthlyInvoiceModal')">&times;</div>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label" data-i18n="selectCustomer">ุงุฎุชุฑ ุงูุนููู</label>
                    <select class="form-control" id="monthlyCustomerSelect"></select>
                </div>
                <div class="form-group">
                    <label class="form-label" data-i18n="month">ุงูุดูุฑ</label>
                    <input type="month" id="monthInput">
                </div>
                <button class="btn btn-primary" style="width:100%;" onclick="generateMonthlyInvoice()"><span data-i18n="generate">ุฅูุดุงุก</span></button>
                <div id="monthlyInvoiceResult" style="margin-top: 14px;"></div>
            </div>
        </div>
    </div>

    <!-- ุงุณุชูุฑุงุฏ ุงููููุงุช (CSV / Excel) -->
    <div class="modal" id="importModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-file-import"></i> <span data-i18n="importData">ุงุณุชูุฑุงุฏ ููู</span></div>
                <div class="modal-close" onclick="closeModal('importModal')">&times;</div>
            </div>
            <div class="modal-body">
                <p style="font-size: 10px; margin-bottom: 10px; color: var(--gray-500);" data-i18n="importHint">ููููู ุฑูุน ููู CSV ุฃู Excel ูุญุชูู ุนูู ุงูููุชุฌุงุช ุฃู ุงูููุงุชูุฑ.</p>
                <div style="display: flex; gap: 8px; margin-bottom: 10px;">
                    <select id="importType" class="form-control" style="flex:2;">
                        <option value="products" data-i18n="importProducts">ููุชุฌุงุช</option>
                        <option value="invoices" data-i18n="importInvoices">ููุงุชูุฑ</option>
                    </select>
                    <button class="btn btn-outline" style="flex:1;" onclick="document.getElementById('importFileInput').click()"><i class="fas fa-upload"></i> <span data-i18n="chooseFile">ุงุฎุชูุงุฑ</span></button>
                </div>
                <input type="file" id="importFileInput" accept=".csv, .xlsx, .xls" style="display:none;" onchange="handleImportFile(event)">
                <div id="importPreview" style="background: var(--gray-50); border-radius: 12px; padding: 8px; max-height: 120px; overflow-y: auto; font-size: 9px;"></div>
                <div style="display: flex; gap: 6px; margin-top: 14px;">
                    <button class="btn btn-outline" style="flex:1;" onclick="closeModal('importModal')"><span data-i18n="cancel">ุฅูุบุงุก</span></button>
                    <button class="btn btn-primary" style="flex:1;" onclick="confirmImport()"><span data-i18n="import">ุงุณุชูุฑุงุฏ</span></button>
                </div>
            </div>
        </div>
    </div>

    <!-- ููุฏุงู ุนุฑุถ ุงููุณุชูุฏุงุช -->
    <div class="modal" id="documentModal">
        <div class="modal-content" style="max-width: 90%; height: 80%;">
            <div class="modal-header">
                <div class="modal-title"><i class="fas fa-file-alt"></i> <span id="documentModalTitle"></span></div>
                <div class="modal-close" onclick="closeModal('documentModal')">&times;</div>
            </div>
            <div class="modal-body" style="height: calc(100% - 60px); padding: 0;">
                <iframe id="documentIframe" style="width:100%; height:100%; border:none;"></iframe>
            </div>
        </div>
    </div>

    <!-- ========== ููุฏุงูุงุช ุงูุฅุนุฏุงุฏุงุช ========== -->
    <!-- ========== ููุฏุงูุงุช ุงูุฅุนุฏุงุฏุงุช ========== -->

    <div class="modal" id="settingsGeneral">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-sliders-h"></i> <span data-i18n="generalSettings">ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</span></div><div class="modal-close" onclick="closeModal('settingsGeneral')">&times;</div></div>
            <div class="modal-body">
                <div class="form-group"><label class="form-label" data-i18n="darkMode">ุงููุถุน ุงููููู</label><select class="form-control" id="darkMode"><option value="auto" data-i18n="auto">ุชููุงุฆู</option><option value="light" data-i18n="light">ูุงุชุญ</option><option value="dark" data-i18n="dark">ุฏุงูู</option></select></div>
                <div class="form-group"><label class="form-label" data-i18n="language">ุงููุบุฉ</label><select class="form-control" id="appLanguage"><option value="ar">ุงูุนุฑุจูุฉ</option><option value="en">English</option></select></div>
                <button class="btn btn-primary" style="width:100%;" onclick="saveGeneral()"><span data-i18n="saveGeneral">ุญูุธ</span></button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsCountryCode">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-globe"></i> <span data-i18n="countryCode">ุฑูุฒ ุงูุฏููุฉ</span></div><div class="modal-close" onclick="closeModal('settingsCountryCode')">&times;</div></div>
            <div class="modal-body">
                <div class="form-group"><label class="form-label" data-i18n="countryCodeSelect">ุงุฎุชุฑ ุฑูุฒ ุงูุฏููุฉ</label><select class="form-control" id="countryCodeSelect"><option value="967">967 (ุงูููู)</option><option value="966">966 (ุงูุณุนูุฏูุฉ)</option><option value="965">965 (ุงููููุช)</option><option value="971">971 (ุงูุฅูุงุฑุงุช)</option><option value="other">ุฅุฏุฎุงู ูุฏูู</option></select></div>
                <div id="customCountryCodeDiv" style="display:none;"><label class="form-label" data-i18n="customCode">ุฑูุฒ ูุฎุตุต</label><input class="form-control" id="customCountryCode" inputmode="numeric"></div>
                <div style="margin-top:10px;"><label class="form-label" data-i18n="behavior">ุนูุฏ ุงูุฅุฑุณุงู</label><div style="display:flex; gap:12px;"><label><input type="radio" name="codeBehavior" value="prepend" checked> <span data-i18n="addAutomatically">ุฅุถุงูุฉ ุงูุฑูุฒ ุชููุงุฆูุงู</span></label><label><input type="radio" name="codeBehavior" value="asis"> <span data-i18n="useAsIs">ุงุณุชุฎุฏู ุงูุฑูู ููุง ูู</span></label></div></div>
                <button class="btn btn-primary" style="width:100%; margin-top:16px;" onclick="saveCountryCode()"><span data-i18n="saveCountryCode">ุญูุธ</span></button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsTemplates">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-file-alt"></i> <span data-i18n="template">ูุงูุจ ุงูุฑุณุงูุฉ</span></div><div class="modal-close" onclick="closeModal('settingsTemplates')">&times;</div></div>
            <div class="modal-body">
                <textarea class="form-control" id="whatsappTemplate" rows="6" style="resize:vertical;">ุฃููุงู ุฌูููุฉ ููุฑฺคูู: {firstName} .. โจ

ุชู ุชุณุฌูู ุทูุจูู ุจูุฌุงุญุ ููุญูู ุจูู ุญูุจ ูุฌูุฒ ุชูุงุตููู ุงูุขู ๐ธ

๐ *ุฑูู ุงูุทูุจ :* #{orderId}
๐ *ุชุงุฑูุฎ ุงูุฌูุงู :* {formattedDate}
๐  *ููุชููุงุชูู :*
{items}

โจ *ูููุฉ ุงูุฌูุงู :* {total} ุฑูุงู

ููุชููู ูุงุฎุชูุงุฑูู ููุฑฺคูู ููููู ุฌุฒุกุงู ูู ุฌูุงูู .. ๐ค</textarea>
                <button class="btn btn-primary" style="width:100%; margin-top:16px;" onclick="saveTemplate()"><span data-i18n="saveTemplate">ุญูุธ ุงููุงูุจ</span></button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsBackup">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-cloud-upload-alt"></i> <span data-i18n="backup">ุงููุณุฎ ุงูุงุญุชูุงุทู</span></div><div class="modal-close" onclick="closeModal('settingsBackup')">&times;</div></div>
            <div class="modal-body text-center">
                <i class="fas fa-database" style="font-size:40px; color:var(--accent-1); margin-bottom:12px;"></i>
                <button class="btn btn-primary" style="width:100%; margin-bottom:8px;" onclick="exportBackup()"><i class="fas fa-download"></i> <span data-i18n="exportBackup">ุชุตุฏูุฑ ูุณุฎุฉ</span></button>
                <button class="btn btn-outline" style="width:100%;" onclick="document.getElementById('importFile').click()"><i class="fas fa-upload"></i> <span data-i18n="importBackup">ุงุณุชูุฑุงุฏ ูุณุฎุฉ</span></button>
                <button class="btn btn-outline" style="width:100%; margin-top:8px; color:var(--danger); border-color:var(--danger);" onclick="clearAllData()"><i class="fas fa-trash-alt"></i> <span data-i18n="clearCache">ูุณุญ ุฌููุน ุงูุจูุงูุงุช</span></button>
                <input type="file" id="importFile" accept=".json" style="display:none;" onchange="importBackup(event)">
            </div>
        </div>
    </div>

    <div class="modal" id="settingsAds">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-bullhorn"></i> <span data-i18n="adsSystem">ูุธุงู ุงูุฅุนูุงูุงุช</span></div><div class="modal-close" onclick="closeModal('settingsAds')">&times;</div></div>
            <div class="modal-body">
                <p style="margin-bottom:12px; font-size:11px;" data-i18n="sendOffers">ุฅุฑุณุงู ุนุฑูุถ ูุฑุณุงุฆู ุชุณููููุฉ ุนุจุฑ ูุงุชุณุงุจ ุฅูู ุฌููุน ุงูุนูููุงุช ุงููุณุฌูุงุช.</p>
                <div class="form-group"><label class="form-label" data-i18n="adMessage">ูุต ุงูุฅุนูุงู</label><textarea class="form-control" id="adMessage" rows="3"></textarea></div>
                <button class="btn btn-primary" style="width:100%;" onclick="sendAds()"><i class="fab fa-whatsapp"></i> <span data-i18n="sendAds">ุฅุฑุณุงู ููุฌููุน</span></button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsCustomize">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-paint-brush"></i> <span data-i18n="customize">ุชุฎุตูุต ุงูุชุทุจูู</span></div><div class="modal-close" onclick="closeModal('settingsCustomize')">&times;</div></div>
            <div class="modal-body">
                <div class="form-group"><label class="form-label" data-i18n="storeName">ุงุณู ุงููุชุฌุฑ</label><input class="form-control" id="storeName" value="LORVEN"></div>
                <div class="form-group"><label class="form-label" data-i18n="logoUrl">ุฑุงุจุท ุงูุดุนุงุฑ (ุงุฎุชูุงุฑู)</label><input class="form-control" id="logoUrl" placeholder="https://example.com/logo.png"></div>
                <button class="btn btn-primary" style="width:100%;" onclick="saveCustomization()"><span data-i18n="saveCustomization">ุญูุธ</span></button>
            </div>
        </div>
    </div>

    <div class="modal" id="settingsSecurity">
        <div class="modal-content">
            <div class="modal-header"><div class="modal-title"><i class="fas fa-shield-alt"></i> <span data-i18n="security">ุงูุฃูุงู ูุงูุฎุตูุตูุฉ</span></div><div class="modal-close" onclick="closeModal('settingsSecurity')">&times;</div></div>
            <div class="modal-body">
                <div class="form-group"><label class="form-label" data-i18n="appLockSelect">ุชูุนูู ููู ุงูุชุทุจูู</label><select class="form-control" id="appLock"><option value="off" data-i18n="off">ุบูุฑ ููุนู</option><option value="pin">ุฑูุฒ PIN</option><option value="fingerprint">ุจุตูุฉ ุงูุฅุตุจุน</option></select></div>
                <div id="pinField" style="display:none;"><label class="form-label" data-i18n="pinCode">ุฃุฏุฎู ุฑูุฒ PIN</label><input type="password" class="form-control" id="pinCode" maxlength="4" inputmode="numeric"></div>
                <button class="btn btn-primary" style="width:100%; margin-top:16px;" onclick="saveSecurity()"><span data-i18n="saveSecurity">ุญูุธ</span></button>
            </div>
        </div>
    </div>
<!-- ุฃููููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู ุงูุนุงุฆูุฉ -->
<div class="ai-floating-icon" onclick="toggleAIChat()">
    <i class="fas fa-robot"></i>
</div>
<!-- ูุงูุฐุฉ ูุญุงุฏุซุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู -->
<div class="ai-chat-window" id="aiChatWindow">
 <div class="ai-chat-header">
    <span><i class="fas fa-robot" style="margin-left: 8px;"></i> <span data-i18n="aiAssistantTitle">ูุณุงุนุฏ ููุฑููู ุงูุฐูู</span></span>
    <button class="ai-close-btn" onclick="toggleAIChat()">&times;</button>
</div>
    <div class="ai-chat-messages" id="aiChatMessages">
        <div class="ai-message ai-bot-message">
            <div class="ai-avatar"><i class="fas fa-robot"></i></div>
            <div class="ai-bubble" data-i18n="aiWelcomeMessage">ูุฑุญุจุงู! ุฃูุง ูุณุงุนุฏู ุงูุฐูู. ููู ูููููู ูุณุงุนุฏุชู ุงููููุ</div>
        </div>
    </div>
    <div class="ai-chat-input-area">
     <button class="ai-attach-btn" onclick="document.getElementById('fileUpload').click()">
    <i class="fas fa-paperclip"></i>
</button>
<input type="file" id="fileUpload" style="display:none;" onchange="handleFileUpload(event)">
        <input type="text" id="aiUserInput" class="ai-chat-input" placeholder="" data-i18n-placeholder="aiInputPlaceholder" onkeypress="if(event.key==='Enter') sendAIMessage()">
        <button class="ai-send-btn" onclick="sendAIMessage()"><i class="fas fa-paper-plane"></i></button>
        <!-- ูู index.htmlุ ุฏุงุฎู ai-chat-header -->
    </div>
</div>
<script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('Service Worker registered'))
        .catch(err => console.log('Service Worker error:', err));
    });
  }
</script>
    <!-- ูููุงุช JavaScript (ุจุฏูู ุงููุณุชูุน ุงูุนุงู) -->
    <script src="js/state.js"></script>
    <script src="js/data.js"></script>
    <script src="js/i18n.js"></script>
    <script src="js/helpers.js"></script>
    <script src="js/ai.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/products.js"></script>
    <script src="js/invoices.js"></script>
    <script src="js/history.js"></script>
    <script src="js/reports.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/importExport.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
